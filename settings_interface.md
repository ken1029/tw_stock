# 設定介面說明

## 功能概述
此設定介面允許用戶自定義應用程式的行為和外觀。設定會保存在瀏覽器的 localStorage 中，因此在重新訪問時會保留。

## 已實現的設定功能

### 1. 顯示設定
- **資料更新頻率**：用戶可以選擇資料更新的頻率，包括：
  - 每秒更新
  - 每5秒更新（默認）
  - 每10秒更新
  - 每30秒更新
  - 每分鐘更新
  - 手動更新

- **圖表顯示範圍**：用戶可以選擇歷史圖表顯示的時間範圍（30天、60天、90天、365天）。

- **圖表顯示系列**：用戶可以選擇在歷史圖表中顯示哪些數據系列：
  - 總資產
  - 台灣股票
  - 中國股票

### 2. 外觀設定
- **主題**：用戶可以在淺色主題和深色主題之間切換。

### 3. 通知設定
- **啟用通知**：用戶可以啟用或禁用通知功能。
- **啟用總市值閃爍通知**：用戶可以啟用或禁用總市值的閃爍通知功能。
- **總市值提醒閾值**：用戶可以設定總市值提醒的金額閾值。
- **啟用台灣股票總市值閃爍通知**：用戶可以啟用或禁用台灣股票總市值的閃爍通知功能。
- **台灣股票總市值提醒閾值**：用戶可以設定台灣股票總市值提醒的金額閾值。
- **啟用中國股票總市值閃爍通知**：用戶可以啟用或禁用中國股票總市值的閃爍通知功能。
- **中國股票總市值提醒閾值**：用戶可以設定中國股票總市值提醒的金額閾值。
- **啟用總報酬率閃爍通知**：用戶可以啟用或禁用總報酬率的閃爍通知功能。
- **總報酬率提醒閾值**：用戶可以設定總報酬率提醒的百分比閾值。
- **總報酬率閃爍通知**：當總報酬率超過設定閾值時，總報酬率數值會閃爍提醒用戶。
- **啟用總損益閃爍通知**：用戶可以啟用或禁用總損益的閃爍通知功能。
- **總損益提醒閾值**：用戶可以設定總損益提醒的金額閾值。
- **總損益閃爍通知**：當總損益超過設定閾值時，總損益數值會閃爍提醒用戶。

## 技術實現

### 前端實現
- 使用 Bootstrap 5 模態框組件實現設定界面
- 設定數據保存在 localStorage 中
- 通過 JavaScript 動態應用設定

### 設定存儲
- 設定數據以 JSON 格式保存在 localStorage 中
- 使用鍵名 `portfolio_settings` 存儲設定
- 設定選項：
  - `enableNotifications`: 是否啟用通知功能
  - `enableMarketValueNotification`: 是否啟用總市值閃爍通知
  - `marketValueNotificationThreshold`: 總市值通知閾值（金額）
  - `enableTwMarketValueNotification`: 是否啟用台灣股票總市值閃爍通知
  - `twMarketValueNotificationThreshold`: 台灣股票總市值通知閾值（金額）
  - `enableCnMarketValueNotification`: 是否啟用中國股票總市值閃爍通知
  - `cnMarketValueNotificationThreshold`: 中國股票總市值通知閾值（金額）
  - `enablePlPercentNotification`: 是否啟用總報酬率閃爍通知
  - `plPercentNotificationThreshold`: 總報酬率通知閾值（百分比）
  - `enablePlNotification`: 是否啟用總損益閃爍通知
  - `plNotificationThreshold`: 總損益通知閾值（金額）

### 主題實現
- 使用 CSS 變量實現主題切換
- 通過 `data-theme` 屬性控制主題
- 圖表顏色也會根據主題自動調整

## 使用方法
1. 點擊頁面右上角的齒輪圖標打開設定介面
2. 修改所需的設定選項
3. 點擊「儲存設定」按鈕應用更改

## 後續改進建議
1. 實現圖表時間範圍設定的實際功能
2. 添加更多可定制的選項（如字體大小、佈局等）
3. 添加重置為默認設定的按鈕
4. 實現更豐富的通知方式（如聲音提醒）
5. 添加對總損益和總報酬率通知的視覺區分（不同的閃爍顏色或效果）
6. 添加對總市值、台灣股票總市值和中國股票總市值通知的視覺區分（不同的閃爍顏色或效果）